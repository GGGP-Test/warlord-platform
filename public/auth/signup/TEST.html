<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Galactly — Onboarding</title>

  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@600;700;800&display=swap" rel="stylesheet"/>

  <style>
    :root{
      --content-w: min(960px, 92vw);
      --title-fs: clamp(28px, 5.6vw, 58px);
      --ctl-h: 46px; --ctl-r: 16px;
      --fg: #e9ecf3; --muted: #a9b2c2;
      --cta-d: 36px;
    }
    @media (min-width:768px){ :root{ --cta-d: 40px; } }

    html,body{height:100%;margin:0; background-color:#0c1020;}
    body{
      color:var(--fg);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 800px at 76% 26%, rgba(240,196,90,.28) 0%, transparent 58%),
        radial-gradient(1200px 800px at 24% 78%, rgba(112, 53, 148, .34) 0%, transparent 52%),
        radial-gradient(700px 500px at 50% -8%, rgba(255,255,255,.08) 0%, transparent 70%),
        linear-gradient(180deg, #171a17, #0f1210);
      background-blend-mode: screen, screen, normal, normal;
      -webkit-font-smoothing: antialiased;
      overflow-y: auto;
    }

    .wrap{ min-height:100dvh; display:grid; place-items:center; padding: 16px; }
    .stage{ width:var(--content-w); }
    .topbar{ position:fixed; top: 10px; left:0; right:0; z-index:10;
      display:flex; align-items:center; justify-content:space-between; padding:0 20px; }
    .brand{ display:flex; align-items:center; gap:10px; color:var(--fg); text-decoration:none; padding:6px 8px; }
    .brand span{ font:800 14px/1 "Plus Jakarta Sans", Inter, system-ui; letter-spacing:.2px; }

    h1{ font:800 var(--title-fs)/1.05 "Plus Jakarta Sans", Inter, system-ui; margin:0 0 18px 0; text-align:center; }
    .subtitle{ color:var(--muted); margin:0 0 18px 0; text-align:center }
    .center { display:grid; gap:16px; place-items:center; }

    .cardless{ max-width:860px; margin-inline:auto; }
    .step{ display:none; }
    .step.active{ display:block; }

    .choices{ display:grid; grid-template-columns: 1fr; gap:16px; }
    @media (min-width:720px){ .choices{ grid-template-columns: 1fr 1fr; } }

    .choice{
      position:relative; border-radius:16px; padding:18px;
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.035));
      border:1px solid rgba(255,255,255,.15);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 10px 30px rgba(0,0,0,.25);
      cursor:pointer; user-select:none;
      display:flex; gap:14px; align-items:flex-start;
      transition: transform .18s ease, border-color .18s ease;
    }
    .choice:hover{ transform:translateY(-2px); border-color:rgba(255,255,255,.25); }
    .choice.selected{ outline:2px solid #f4d06f; box-shadow: 0 0 0 6px rgba(244,208,111,.15); }
    .choice h3{ margin:0 0 6px 0; font-size:18px; font-weight:700; }
    .choice p{ margin:0; color:var(--muted); font-size:14px; line-height:1.35; }
    .choice .icon{
      display:inline-flex; align-items:center; justify-content:center;
      width:38px; height:38px; border-radius:12px;
      background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.05));
      border:1px solid rgba(255,255,255,.18);
      flex:0 0 auto;
    }
    .choice .icon svg{ width:18px; height:18px; }

    .row-actions{ display:flex; justify-content:flex-end; gap:12px; margin-top:16px; }
    .btn-icon{
      display:inline-flex; align-items:center; justify-content:center;
      width:44px; height:44px; border-radius:999px; color:var(--fg);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid rgba(255,255,255,.18);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.1), 0 10px 26px rgba(0,0,0,.24);
      cursor:pointer;
      transition: transform .18s ease, opacity .18s ease;
    }
    .btn-icon[disabled]{ opacity:.4; pointer-events:none; }
    .btn-icon:hover{ transform: translateY(-1px); }

    .title-row{ text-align:center; margin-bottom:8px; margin-top: 48px; }
    .hr{ width:min(560px, 86vw); height:1px; margin:12px auto; background:linear-gradient(90deg, transparent, rgba(255,255,255,.14), transparent) }
    .muted{ color:var(--muted); font-size:14px; text-align:center }

    .chip-row{ display:flex; gap:18px; flex-wrap:wrap; justify-content:center; margin-bottom: 16px; }
    .chip{
      position:relative; display:inline-grid;
      grid-auto-flow:column; align-items:center; gap:10px;
      height:46px; padding:0 18px; border-radius:20px;
      color:var(--fg); text-decoration:none; font-weight:600;
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.16);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.15), 0 2px 8px rgba(0,0,0,.25);
      transition: transform .15s ease;
    }
    .chip:hover{ transform: translateY(-1px); }

    .field-wrap{ width:min(280px, 86vw); margin: 20px auto 0; position:relative; }
    .pressed{
      position:relative; display:grid; grid-template-columns: 26px 1fr 2px var(--cta-d); align-items:center;
      height:var(--ctl-h); border-radius:var(--ctl-r); padding:0 6px 0 14px; background: transparent;
      border:1px solid rgba(255,255,255,.16);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.02), inset 0 -3px 6px rgba(0,0,0,.58);
      transition: border-color .15s ease;
    }
    .pressed:has(input:focus){ border-color: rgba(255,255,255,.24); }

    .left-icon{ display:inline-grid; place-items:center; width:24px; color:#e7e7e7; opacity:.9 }
    input{ min-width:0; background:transparent; border:0; outline:0; color:var(--fg);
      font-size:14px; padding:0 8px; height:calc(var(--ctl-h) - 2px); }
    input::placeholder{ color:rgba(233,236,243,.62); }

    .field-cta{
      width:var(--cta-d); height:var(--cta-d);
      transform: scale(0.9); opacity:0; pointer-events:none;
      border-radius:999px; border:1px solid rgba(255,255,255,.16);
      background: radial-gradient(120% 120% at 50% 40%, rgba(255,255,255,.05), rgba(0,0,0,.45));
      box-shadow: inset 0 1px 0 rgba(255,255,255,.25), 0 4px 14px rgba(0,0,0,.28);
      color:var(--fg); display:grid; place-items:center; cursor:pointer; flex-shrink: 0;
      transition: transform 0.3s ease, opacity 0.3s ease;
    }
    .pressed.show-cta .field-cta{ opacity:1; pointer-events:auto; transform: scale(1); }

    .single-action{ display:grid; place-items:center; margin-top:12px; }
    .small-row{ display:flex; gap:10px; justify-content:center; margin-top:8px; font-size:12px; color:var(--muted); }
    .small-row a{ color:var(--fg); text-decoration:underline; cursor:pointer }

    @keyframes fadeOut { from{ opacity:1; } to{ opacity:0; } }
    @keyframes fadeIn { from{ opacity:0; } to{ opacity:1; } }
    .fade-out{ animation: fadeOut 0.3s ease forwards; }
    .fade-in{ animation: fadeIn 0.4s ease forwards; }
    .fade-in-delayed{ animation: fadeIn 0.4s ease forwards; animation-delay: 0.15s; }

    [hidden]{ display:none !important; }
  </style>
</head>
<body>

  <div class="topbar">
    <a class="brand" href="/">
      <span class="brand-word">Galactly</span>
    </a>
  </div>

  <main class="wrap">
    <div class="stage cardless">

      <!-- STEP 1 -->
      <section id="step1" class="step active">
        <h1>What brings you to Galactly?</h1>
        <p class="subtitle">Pick one to tailor your setup.</p>

        <div class="choices">
          <div class="choice" data-role="supplier" tabindex="0">
            <div class="icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 7h18v10H3z"></path><path d="M16 7V3H8v4"></path>
              </svg>
            </div>
            <div>
              <h3>Supplier — I sell packaging</h3>
              <p>Capture buyers already signaling intent, prioritize by timing, and let smart outreach run on autopilot.</p>
            </div>
          </div>

          <div class="choice" data-role="buyer" tabindex="0">
            <div class="icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 12.39a2 2 0 0 0 2 1.61h8.72a2 2 0 0 0 2-1.58L23 6H6"></path>
              </svg>
            </div>
            <div>
              <h3>Buyer — I buy packaging</h3>
              <p>Describe your need once—get matched to vetted suppliers fast, with clear timelines and quotes.</p>
            </div>
          </div>
        </div>

        <div class="row-actions">
          <button type="button" id="s1-next" class="btn-icon" disabled>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 18l6-6-6-6"></path>
            </svg>
          </button>
        </div>
      </section>

      <!-- STEP 2 -->
      <section id="step2" class="step">

        <!-- Title for email stage -->
        <div id="s2-title-email" class="title-row">
          <h1>Get started with Us</h1>
          <p class="subtitle">Continue with</p>
        </div>

        <!-- Title for password stage -->
        <div id="s2-title-password" class="title-row" hidden>
          <h1>Create your password</h1>
          <p class="subtitle">Your password must be at least 6 characters long.</p>
        </div>

        <!-- Title for confirm stage -->
        <div id="s2-title-confirm" class="title-row" hidden>
          <h1>One Last Step</h1>
          <p class="subtitle">Confirm your password to continue</p>
        </div>

        <!-- Social buttons (only on email stage) -->
        <div id="social-section" class="center">
          <div class="chip-row">
            <a class="chip" href="#" id="googleBtn">
              <svg width="20" height="20" viewBox="0 0 533.5 544.3">
                <path fill="#4285F4" d="M533.5 278.4c0-18.4-1.7-36-4.9-53.1H272v100.5h146.9c-6.3 34-25 62.8-53.1 82v68h85.7c50.1-46.2 81.9-114.1 81.9-197.4z"/>
                <path fill="#34A853" d="M272 544.3c72.2 0 132.8-23.9 177.1-64.9l-85.7-68c-23.8 16-54.2 25.5-91.4 25.5-70 0-129.4-47.2-150.6-110.8H33.1v69.6c44.2 87.8 135.2 148.6 238.9 148.6z"/>
                <path fill="#FBBC04" d="M121.4 326.1c-11.2-33.5-11.2-69.6 0-103.1V153.4H33.1c-40.1 79.9-40.1 175.2 0 255.1l88.3-69.6z"/>
                <path fill="#EA4335" d="M272 107.7c39.2-.6 76.7 14 104.8 41.2l78.3-78.3C411.7 18.1 344.2-5.3 272 0 168.3 0 77.3 60.8 33.1 148.6l88.3 69.6C142.7 154.6 202 107.7 272 107.7z"/>
              </svg>
              <span>Google</span>
            </a>
            <a class="chip" href="#" id="microsoftBtn">
              <svg width="20" height="20" viewBox="0 0 23 23">
                <path fill="#f25022" d="M0 0h11v11H0z"/>
                <path fill="#00a4ef" d="M12 0h11v11H12z"/>
                <path fill="#7fba00" d="M0 12h11v11H0z"/>
                <path fill="#ffb900" d="M12 12h11v11H12z"/>
              </svg>
              <span>Microsoft</span>
            </a>
          </div>
        </div>

        <div class="hr"></div>

        <div id="s2-bottom">
          <div id="s2-or" class="muted">OR</div>

          <!-- email -->
          <div class="field-wrap" id="emailWrap">
            <div class="pressed" id="emailBox">
              <span class="left-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="5" width="18" height="14" rx="3"/><path d="M3 7l9 6 9-6"/>
                </svg>
              </span>
              <input id="email" type="email" placeholder="Email"/>
              <span></span>
              <button id="emailNext" class="field-cta" type="button">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 18l6-6-6-6"></path>
                </svg>
              </button>
            </div>
          </div>

          <!-- password -->
          <div class="field-wrap" id="pwdWrap" hidden>
            <div class="pressed" id="pwdBox">
              <span class="left-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="11" width="18" height="10" rx="3"/><path d="M7 11V8a5 5 0 0 1 10 0v3"/>
                </svg>
              </span>
              <input id="password" type="password" placeholder="Password (min 6 characters)"/>
              <span></span>
              <button id="pwdNext" class="field-cta" type="button">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 18l6-6-6-6"></path>
                </svg>
              </button>
            </div>
          </div>

          <!-- confirm password -->
          <div class="field-wrap" id="confirmWrap" hidden>
            <div class="pressed" id="confirmBox">
              <span class="left-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="11" width="18" height="10" rx="3"/><path d="M7 11V8a5 5 0 0 1 10 0v3"/>
                </svg>
              </span>
              <input id="confirmPassword" type="password" placeholder="Confirm Password"/>
              <span></span>
              <button id="confirmNext" class="field-cta" type="button">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 18l6-6-6-6"></path>
                </svg>
              </button>
            </div>
          </div>

          <div class="single-action">
            <button type="button" id="s2-back" class="btn-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M15 18l-6-6 6-6"></path>
              </svg>
            </button>
          </div>

          <div class="small-row">
            <span>Already have an account?</span>
            <a href="/auth/login/">Log in</a>
          </div>
        </div>
      </section>

    </div>
  </main>

  <script>
    const byId = (id) => document.getElementById(id);
    const step1 = byId("step1");
    const step2 = byId("step2");
    const s1Next = byId("s1-next");
    const s2Back = byId("s2-back");

    const titleEmail = byId("s2-title-email");
    const titlePassword = byId("s2-title-password");
    const titleConfirm = byId("s2-title-confirm");
    const socialSection = byId("social-section");
    const s2Or = byId("s2-or");

    const emailWrap = byId("emailWrap");
    const emailInput = byId("email");
    const emailBox = byId("emailBox");
    const emailNext = byId("emailNext");

    const pwdWrap = byId("pwdWrap");
    const pwdBox = byId("pwdBox");
    const pwdInput = byId("password");
    const pwdNext = byId("pwdNext");

    const confirmWrap = byId("confirmWrap");
    const confirmBox = byId("confirmBox");
    const confirmInput = byId("confirmPassword");
    const confirmNext = byId("confirmNext");

    let currentStage = 'email';

    // Step 1: Role selection
    let role = null;
    document.querySelectorAll(".choice").forEach(el => {
      const r = el.getAttribute("data-role");
      const pick = () => {
        role = r;
        document.querySelectorAll(".choice").forEach(c => {
          c.classList.toggle("selected", c === el);
        });
        s1Next.disabled = false;
      };
      el.addEventListener("click", pick);
      el.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          pick();
        }
      });
    });

    s1Next.addEventListener("click", () => {
      if (!role) return;
      step1.classList.remove("active");
      step2.classList.add("active");
      currentStage = 'email';
    });

    // Email
    const looksValidEmail = (v) => /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i.test(v.trim());
    
    function updateEmailCTA() {
      emailBox.classList.toggle('show-cta', looksValidEmail(emailInput.value));
    }

    emailInput.addEventListener('input', updateEmailCTA);
    emailInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && looksValidEmail(emailInput.value)) {
        e.preventDefault();
        emailNext.click();
      }
    });

    emailNext.addEventListener('click', () => {
      if (!looksValidEmail(emailInput.value)) return;
      
      // Fade out email stage elements
      titleEmail.classList.add('fade-out');
      socialSection.classList.add('fade-out');
      s2Or.classList.add('fade-out');
      emailBox.classList.remove('show-cta');

      setTimeout(() => {
        // Hide old, show new
        titleEmail.hidden = true;
        socialSection.hidden = true;
        s2Or.hidden = true;
        
        titlePassword.hidden = false;
        const h1 = titlePassword.querySelector('h1');
        const subtitle = titlePassword.querySelector('.subtitle');
        h1.classList.add('fade-in');
        subtitle.classList.add('fade-in-delayed');

        pwdWrap.hidden = false;
        pwdWrap.classList.add('fade-in');
        setTimeout(() => pwdInput.focus(), 100);

        currentStage = 'password';

        // Cleanup animations
        setTimeout(() => {
          titleEmail.classList.remove('fade-out');
          socialSection.classList.remove('fade-out');
          s2Or.classList.remove('fade-out');
          h1.classList.remove('fade-in');
          subtitle.classList.remove('fade-in-delayed');
          pwdWrap.classList.remove('fade-in');
        }, 700);
      }, 300);
    });

    // Password
    function updatePwdCTA() {
      pwdBox.classList.toggle('show-cta', pwdInput.value.length >= 6);
    }

    pwdInput.addEventListener('input', updatePwdCTA);
    pwdInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && pwdInput.value.length >= 6) {
        e.preventDefault();
        pwdNext.click();
      }
    });

    pwdNext.addEventListener('click', () => {
      if (pwdInput.value.length < 6) return;
      
      // Fade out password stage elements
      titlePassword.classList.add('fade-out');
      pwdBox.classList.remove('show-cta');
      pwdWrap.classList.add('fade-out');

      setTimeout(() => {
        // Hide old, show new
        titlePassword.hidden = true;
        pwdWrap.hidden = true;
        
        titleConfirm.hidden = false;
        const h1 = titleConfirm.querySelector('h1');
        const subtitle = titleConfirm.querySelector('.subtitle');
        h1.classList.add('fade-in');
        subtitle.classList.add('fade-in-delayed');

        confirmWrap.hidden = false;
        confirmWrap.classList.add('fade-in');
        setTimeout(() => confirmInput.focus(), 100);

        currentStage = 'confirm';

        // Cleanup animations
        setTimeout(() => {
          titlePassword.classList.remove('fade-out');
          pwdWrap.classList.remove('fade-out');
          h1.classList.remove('fade-in');
          subtitle.classList.remove('fade-in-delayed');
          confirmWrap.classList.remove('fade-in');
        }, 700);
      }, 300);
    });

    // Confirm
    function updateConfirmCTA() {
      const valid = confirmInput.value.length >= 6 && confirmInput.value === pwdInput.value;
      confirmBox.classList.toggle('show-cta', valid);
    }

    confirmInput.addEventListener('input', updateConfirmCTA);
    confirmInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && confirmInput.value === pwdInput.value) {
        e.preventDefault();
        confirmNext.click();
      }
    });

    confirmNext.addEventListener('click', () => {
      // Do nothing - final step
      console.log('Final submit:', {
        email: emailInput.value,
        password: pwdInput.value,
        role: role
      });
    });

    // Back button
    s2Back.addEventListener('click', () => {
      if (currentStage === 'confirm') {
        // Go back to password
        titleConfirm.classList.add('fade-out');
        confirmWrap.classList.add('fade-out');

        setTimeout(() => {
          titleConfirm.hidden = true;
          confirmWrap.hidden = true;
          
          titlePassword.hidden = false;
          const h1 = titlePassword.querySelector('h1');
          const subtitle = titlePassword.querySelector('.subtitle');
          h1.classList.add('fade-in');
          subtitle.classList.add('fade-in-delayed');

          pwdWrap.hidden = false;
          pwdWrap.classList.add('fade-in');
          setTimeout(() => pwdInput.focus(), 100);

          currentStage = 'password';

          setTimeout(() => {
            titleConfirm.classList.remove('fade-out');
            confirmWrap.classList.remove('fade-out');
            h1.classList.remove('fade-in');
            subtitle.classList.remove('fade-in-delayed');
            pwdWrap.classList.remove('fade-in');
          }, 700);
        }, 300);
      } else if (currentStage === 'password') {
        // Go back to email
        titlePassword.classList.add('fade-out');
        pwdWrap.classList.add('fade-out');

        setTimeout(() => {
          titlePassword.hidden = true;
          pwdWrap.hidden = true;
          
          titleEmail.hidden = false;
          const h1 = titleEmail.querySelector('h1');
          const subtitle = titleEmail.querySelector('.subtitle');
          h1.classList.add('fade-in');
          subtitle.classList.add('fade-in-delayed');

          socialSection.hidden = false;
          socialSection.classList.add('fade-in');
          
          s2Or.hidden = false;
          s2Or.classList.add('fade-in');

          currentStage = 'email';

          setTimeout(() => {
            titlePassword.classList.remove('fade-out');
            pwdWrap.classList.remove('fade-out');
            h1.classList.remove('fade-in');
            subtitle.classList.remove('fade-in-delayed');
            socialSection.classList.remove('fade-in');
            s2Or.classList.remove('fade-in');
          }, 700);
        }, 300);
      } else {
        // Go back to step 1
        step2.classList.remove('active');
        step1.classList.add('active');
      }
    });
  </script>

</body>
</html>